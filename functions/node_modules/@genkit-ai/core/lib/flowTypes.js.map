{"version":3,"sources":["../src/flowTypes.ts"],"sourcesContent":["/**\n * Copyright 2024 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { z } from 'zod';\n\n// NOTE: Keep this file in sync with genkit-tools/src/types/flow.ts!\n// Eventually tools will be source of truth for these types (by generating a\n// JSON schema) but until then this file must be manually kept in sync\n\nexport const FlowResponseSchema = z.object({\n  response: z.unknown().nullable(),\n});\n\nexport const FlowErrorSchema = z.object({\n  error: z.string().optional(),\n  stacktrace: z.string().optional(),\n});\n\nexport type FlowError = z.infer<typeof FlowErrorSchema>;\n\nexport const FlowResultSchema = FlowResponseSchema.and(FlowErrorSchema);\n\n/**\n * Used for flow control.\n */\nexport const FlowInvokeEnvelopeMessageSchema = z.object({\n  // Start new flow.\n  start: z.object({\n    input: z.unknown().optional(),\n    labels: z.record(z.string(), z.string()).optional(),\n  }),\n});\n\nexport type FlowInvokeEnvelopeMessage = z.infer<\n  typeof FlowInvokeEnvelopeMessageSchema\n>;\n\n/**\n * Used by the flow action.\n */\nexport const FlowActionInputSchema = FlowInvokeEnvelopeMessageSchema.extend({\n  auth: z.unknown().optional(),\n});\n\nexport type FlowActionInput = z.infer<typeof FlowActionInputSchema>;\n"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAgBA,iBAAkB;AAMX,MAAM,qBAAqB,aAAE,OAAO;AAAA,EACzC,UAAU,aAAE,QAAQ,EAAE,SAAS;AACjC,CAAC;AAEM,MAAM,kBAAkB,aAAE,OAAO;AAAA,EACtC,OAAO,aAAE,OAAO,EAAE,SAAS;AAAA,EAC3B,YAAY,aAAE,OAAO,EAAE,SAAS;AAClC,CAAC;AAIM,MAAM,mBAAmB,mBAAmB,IAAI,eAAe;AAK/D,MAAM,kCAAkC,aAAE,OAAO;AAAA;AAAA,EAEtD,OAAO,aAAE,OAAO;AAAA,IACd,OAAO,aAAE,QAAQ,EAAE,SAAS;AAAA,IAC5B,QAAQ,aAAE,OAAO,aAAE,OAAO,GAAG,aAAE,OAAO,CAAC,EAAE,SAAS;AAAA,EACpD,CAAC;AACH,CAAC;AASM,MAAM,wBAAwB,gCAAgC,OAAO;AAAA,EAC1E,MAAM,aAAE,QAAQ,EAAE,SAAS;AAC7B,CAAC;","names":[]}